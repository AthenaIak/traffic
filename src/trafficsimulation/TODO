package trafficsimulation;

/**
 * Created by oschnitzeler on 5/17/16.
 *
 * TODO: Change order of adapting speed <-> setting new position in Road.java
 * TODO: Incorporate gap in calculation of new desired speed
 * TODO: Implement iterative way of finding new speed for next time step. (desired position)
 * TODO: Compare rules from the article by Vasic et al. to our set
 * TODO: Find proper way to generate the initial traffic situation. - Hue - DONE
 *
 */


- calculate desired position:
    new desired position = current_pos + MIN (speed + max_acc, max_speed)
    then loop through: speed + max_acc to speed - max_dec:
        TODO: Check whether there are no cars in between the closest desired position and the current position. If that is the case, then we have a collision.
        possible = ((next_car_pos + next_car_speed - max_dec) - (gap - desired_pos + speed + max_acc)) >= 0
            where new_speed = desired_position - current_position
            where gap = (floor((new_speed+max_acc) / max_dec + 1)
        if possible:
            return desired_pos
        else:
            check different lane at same position - incorporate position/speed of previous car on other lane:
                possible = prev_car_position + speed + max_acc + gap - position <= 0 (?)

    return impossible (?)

- calculate and update speed, lane, position based on desired position



Generate the initial traffic situation. - Hue

Initial speed of car is generated in the construction of FastCar() or NormalCar() around the maximum speed 
(assume everything is normal, so cars are at around max speed).

Car may have its own max_speed which is around +/- 1 of the max_speed by law.

Distance between a car and the car in the front (same lane) is between [1.5 x carSpeed, 2*carSpeed)
so we simulate the fact that some cars follow the 2-seconds rule, some not

The road size (length of lane) is therefore adapted to be: num_cars X (max_speed X 2 cell_gaps) / (2 lanes)

I also modified the max acceleration and deceleration of cars. So the max_deceleration is 2 for both type of cars.


Acceleration: 
Normal cars: 3 m/s2, it takes in average 0.9 second to increase speed 10km/h, means: (10/3.6)m/s : 0.9 s = 3.086
http://www.bbc.co.uk/education/guides/z3bqtfr/revision/3
http://accelerationtimes.com/models/peugeot-205-gti-1-6l

Decelaration:
Normal car: 3.5 m/s2, It takes about 8 second to decrease from 100km/h to 0, means: (100/3.6) m/s : 8s = 3.5 m/s2
http://www.ijtte.com/uploads/2012-10-01/5ebd8343-9b9c-b1d4IJTTE%20vol2%20no3%20%287%29.pdf
